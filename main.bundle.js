!function(t){var e={};function a(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(s,n,function(e){return t[e]}.bind(null,n));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=3)}([function(t,e){const a={create(t){const e=document.querySelector(".th");if(0===t.length)return r("modale--no-task-list"),!1;if(document.querySelector(".th__weekdays")){document.querySelector(".th__weekdays").replaceWith(n(t))}else e.appendChild(n(t));let a;o(document.querySelector(".th__weekdays")),document.querySelector("#taskListContainer")?a=document.querySelector("#taskListContainer"):(a=document.createElement("div"),a.id="taskListContainer",a.className="task-list-container",e.appendChild(a));let l=Date.now(),i=0;t.forEach(t=>{const e=t.nodesArray.length,a=Date.parse(t.nodesArray[0].date),s=Date.parse(t.nodesArray[e-1].date);a<l&&(l=a),s>i&&(i=s)}),t.forEach(t=>{const e=t.nodesArray.length,n=function(t){const e=document.createElement("div");e.classList.add("task-list"),e.id="tl"+t.id;const a=document.createElement("h3");a.classList.add("task-list__title"),a.innerHTML=t.title;const s=document.createElement("div");return s.classList.add("task-list__task-list"),e.appendChild(a),e.appendChild(s),e}(t),r=Date.parse(t.nodesArray[0].date),o=Date.parse(t.nodesArray[e-1].date);if(r>l){const t=Math.floor((r-l)/864e5);for(let e=0;e<t;e++){const t=n.children[1],e=s(null,!0);t.appendChild(e)}}if(t.nodesArray.forEach(t=>{const e=n.children[1],a=s(t);e.appendChild(a)}),i>o){const t=Math.floor((i-o)/864e5);for(let e=0;e<t;e++){const t=n.children[1],e=s(null,!0);t.appendChild(e)}}a.appendChild(n)}),console.log("view created")},reload(t){document.getElementById("taskListContainer")&&(document.getElementById("taskListContainer").innerHTML=""),this.create(t),console.log("view reloaded")},reloadTask(t){const e=document.getElementById("taskListContainer").children;var a=null;for(let s=0;s<e.length;s++){const n=e[s].children[1].children;for(let e=0;e<n.length;e++){Number.parseInt(n[e].id.slice(1))===t.id&&(a=n[e])}}a.classList.remove("task--value-true"),a.classList.remove("task--value-false"),a.classList.remove("task--value-none"),!0===t.value?a.classList.add("task--value-true"):!1===t.value?a.classList.add("task--value-false"):"none"===t.value&&a.classList.add("task--value-none")},onclick:null,createTaskListBtn:{onclick:null}};function s(t,e){const a=document.createElement("div");a.classList.add("task");const s=document.createElement("div");return s.classList.add("task__circle"),a.appendChild(s),e?a.classList.add("task--state-filler"):(a.id="t"+t.id,!0===t.value?a.classList.add("task--value-true"):!1===t.value?a.classList.add("task--value-false"):"none"===t.value&&a.classList.add("task--value-none")),a}function n(t){const e=document.createElement("ul");e.classList.add("th__weekdays");let a=Date.now(),s=0;t.forEach(t=>{const e=t.nodesArray.length,n=Date.parse(t.nodesArray[0].date),l=Date.parse(t.nodesArray[e-1].date);n<a&&(a=n),l>s&&(s=l)});const n=Math.floor((s-a)/864e5);let l=a;for(let t=0;t<n+1;t++){const t=document.createElement("li");t.classList.add("th__weekday");const a=document.createElement("span");a.classList.add("th__weekday-text");const s=new Date(l).getDate(),n=new Date(l).getMonth()+1;a.innerHTML=s+"/"+n,l+=864e5,t.appendChild(a),e.appendChild(t)}return e}function l(t){t.classList.remove("modale--state-active"),t.parentNode.classList.remove("modales--state-active")}function r(t){document.querySelector(".modales").classList.add("modales--state-active"),document.querySelector("."+t).classList.add("modale--state-active")}function o(t){window.getComputedStyle(t.parentNode).width.split("px")[0]>500?(t.style.width=`calc(100% + ${t.parentNode.scrollLeftMax}px)`,t.style.height=""):(t.style.height=`calc(100% + 3.5em + ${t.parentNode.scrollTopMax}px)`,t.style.width="")}window.addEventListener("click",t=>{const e=function(t){let e;if(!t.target.classList.contains("task__circle"))return null;e=t.target.parentElement;const a={id:Number.parseInt(e.id.slice(1))};return e.classList.contains("task--value-true")?a.value=!0:e.classList.contains("task--value-false")?a.value=!1:e.classList.contains("task--value-none")&&(a.value="none"),e.classList.contains("task--state-enable")?a.state="enable":e.classList.contains("task--state-disable")&&(a.state="disable"),a}(t);e&&a.onclick(e)}),window.addEventListener("resize",()=>{o(document.querySelector(".th__weekdays"))}),document.querySelectorAll(".form__submit-btn").forEach(t=>{t.addEventListener("click",e=>{if(t.parentNode.classList.contains("form--create-tasklist")){var s=t.parentNode,n=s.querySelector(".input__input");const e=n.value;if(""===e)return function(t,e){if(!e||"string"!=typeof e)throw new Error("errorMassage must be a valid string");if(!t.querySelector(".input__error-msg"))throw new Error('::input is not a valid "input element"');t.querySelector(".input__error-msg").innerHTML=e,t.classList.add("input--state-error")}(n.parentNode,"input must not be empty"),!1;n.value="";const r={title:e,state:"ok",des:null};a.createTaskListBtn.onclick(r),l(s.parentNode)}})}),document.querySelectorAll(".btn--create-task-list").forEach(t=>{t.addEventListener("click",t=>{r("modale--create-tasklist")})}),document.querySelectorAll(".close-btn").forEach(t=>{t.addEventListener("click",()=>{l(t.parentNode)})}),t.exports=a},function(t,e,a){},,function(t,e,a){"use strict";a.r(e);a(1);var s={getAllData(){const t=[];return JSON.parse(localStorage.getItem("taskListIdList")).forEach(e=>{const a=localStorage.getItem(e),s=JSON.parse(a);t.push(s)}),t},saveAllData(t,e){const a=JSON.stringify(t);return localStorage.setItem(e,a)},getTaskListById:t=>JSON.parse(localStorage.getItem(t)),addTaskList(t,e){localStorage.setItem(t,e)},getTaskById(t){let e;return this.config.taskListIdList.get().forEach(a=>{this.getTaskListById(a).nodesArray.forEach(a=>{a.id===t&&(e=a)})}),e},setTaskById(t,e){let a,s;this.config.taskListIdList.get().forEach(n=>{const l=this.getTaskListById(n);l.nodesArray.forEach((r,o)=>{r.id===t&&(l.nodesArray[o]=e,a=n,s=JSON.stringify(l))})}),localStorage.setItem(a,s)},config:{lastTaskListId:{get:()=>localStorage.getItem("lastTaskListId"),set(t){localStorage.setItem("lastTaskListId",t)}},lastTaskId:{get:()=>localStorage.getItem("lastTaskId"),set(t){localStorage.setItem("lastTaskId",t)}},taskListIdList:{get:()=>JSON.parse(localStorage.getItem("taskListIdList")),set(t){localStorage.setItem("taskListIdList",t)}}}};function n(t){let e,a;switch(t){case"Task":a="lastTaskId";break;case"TaskList":a="lastTaskListId";break;default:return null}return e=localStorage.getItem(a),e=Number.parseInt(e)+1,localStorage.setItem(a,e),e}class l{constructor(t,e,a="enable",s=null){this.value=t,this.id=n("Task"),this.date=e||(new Date).toISOString().split("T")[0],this.lastChangeDate=(new Date).toISOString(),this.isChanged=!0,this.state=a,this.des=s}}class r{constructor(t,e){this.nodesArray=[],this.title=t,this.id=n("TaskList"),this.isChanged=!0,this.lastChangeDate=(new Date).toISOString(),this.creationDate=(new Date).toISOString().split("T")[0],this.des=e}}var o=a(0),i=a.n(o);function c(t,e){let a;e?s.getAllData().forEach(t=>{t.id===e&&(a=[],a.push(t))}):a=s.getAllData(),a.forEach(e=>{const a=new l("none",t);e.nodesArray.push(a),s.saveAllData(e,"TaskList-"+e.title)})}null===s.config.lastTaskId.get()&&s.config.lastTaskId.set(1e7),null===s.config.lastTaskListId.get()&&s.config.lastTaskListId.set(1e7),null===s.config.taskListIdList.get()&&s.config.taskListIdList.set("[]"),navigator.serviceWorker?navigator.serviceWorker.register("./sw.bundle.js").then(()=>{console.log("sw registred")}).catch(t=>{console.log("Error while registreing sw"),console.log(t)}):console.log("sw is not avaialbe"),i.a.onclick=t=>{!function(t){const e=t.id,a=s.getTaskById(e);!0===a.value?(a.value=!1,a.isChanged=!0,a.lastChangeDate=(new Date).toISOString()):(!1===a.value||"none"===a.value)&&(a.value=!0,a.isChanged=!0,a.lastChangeDate=(new Date).toISOString());s.setTaskById(e,a),i.a.reloadTask(a)}(t)},i.a.createTaskListBtn.onclick=t=>{!function(t){const e=new r(t.title,t.des),a=s.config.taskListIdList.get();a.push("TaskList-"+e.title),s.addTaskList("TaskList-"+e.title,JSON.stringify(e)),s.config.taskListIdList.set(JSON.stringify(a)),c((new Date).toISOString().split("T")[0],e.id),i.a.reload(s.getAllData())}(t)},s.getAllData().length>0&&s.getAllData().forEach(t=>{const e=t.nodesArray;let a,s;if(0===e.length)a=Date.now()-864e5,s=1;else{a=Date.parse(e[e.length-1].date);const t=Date.now()-a;s=Math.floor(t/864e5)}for(;s>0;)a+=864e5,--s,c(new Date(a).toISOString().split("T")[0],t.id)}),i.a.create(s.getAllData())}]);